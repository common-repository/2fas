!function(t){try{var s=t("#pusher-session-id"),e=t("#status-id"),o=t("#integration-id"),a=t("#totp-token"),c=t(".twofas-error-modal"),f=t("#error-modal-message");function u(s){e.val(s.statusId),a.val(s.totpToken),t(".twofas-submit").addClass("twofas-pusher"),t(".twofas-sockets .twofas-token-setup").removeClass("twofas-play"),t(".twofas-sockets .twofas-token-loading").addClass("twofas-play"),this.disconnect(),setTimeout(function(){t("#loginform").submit()},1)}function l(r,n,i){var s=r.subscribe(n);s.bind("twofas-login-request",u,r),s.bind("pusher:subscription_error",function(s){var t,e,o,a;t=s,e=r,o=n,(a=i)<3?l(e,o,++a):(Sentry.captureMessage("Subscription error",{extra:{channel_name:o,status:t}}),e.disconnect(),f.html("Subscription error ("+t+")"),c.trigger("display"))})}if(s.length){var r=new Pusher(twofas.pusherKey,{forceTLS:!0,authEndpoint:twofas.authEndpoint}),n="private-wp_"+o.val()+"_"+s.val();l(r,n,1)}}catch(s){Sentry.captureException(s),s instanceof ReferenceError?(t(".twofas-sockets .twofas-icon-padlock").remove(),t(".twofas-sockets .twofas-sockets-error").css("display","inline"),t(".twofas-sockets .twofas-token-setup").removeClass("twofas-play"),t(".twofas-sockets .twofas-token-error").addClass("twofas-play")):(f.html("Server error occurred. Please try to refresh this page."),c.trigger("display"))}}(jQuery);